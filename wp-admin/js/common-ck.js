/* global setUserSetting, ajaxurl, commonL10n, alert, confirm, pagenow */var showNotice,adminMenu,columns,validateForm,screenMeta;(function(e,t,n){adminMenu={init:function(){},fold:function(){},restoreMenuState:function(){},toggle:function(){},favorites:function(){}};columns={init:function(){var t=this;e(".hide-column-tog","#adv-settings").click(function(){var n=e(this),r=n.val();n.prop("checked")?t.checked(r):t.unchecked(r);columns.saveManageColumnsState()})},saveManageColumnsState:function(){var t=this.hidden();e.post(ajaxurl,{action:"hidden-columns",hidden:t,screenoptionnonce:e("#screenoptionnonce").val(),page:pagenow})},checked:function(t){e(".column-"+t).show();this.colSpanChange(1)},unchecked:function(t){e(".column-"+t).hide();this.colSpanChange(-1)},hidden:function(){return e(".manage-column").filter(":hidden").map(function(){return this.id}).get().join(",")},useCheckboxesForHidden:function(){this.hidden=function(){return e(".hide-column-tog").not(":checked").map(function(){var e=this.id;return e.substring(e,e.length-5)}).get().join(",")}},colSpanChange:function(t){var n=e("table").find(".colspanchange"),r;if(!n.length)return;r=parseInt(n.attr("colspan"),10)+t;n.attr("colspan",r.toString())}};e(document).ready(function(){columns.init()});validateForm=function(t){return!e(t).find(".form-required").filter(function(){return e("input:visible",this).val()===""}).addClass("form-invalid").find("input:visible").change(function(){e(this).closest(".form-invalid").removeClass("form-invalid")}).size()};showNotice={warn:function(){var e=commonL10n.warnDelete||"";return confirm(e)?!0:!1},note:function(e){alert(e)}};screenMeta={element:null,toggles:null,page:null,init:function(){this.element=e("#screen-meta");this.toggles=e(".screen-meta-toggle a");this.page=e("#wpcontent");this.toggles.click(this.toggleEvent)},toggleEvent:function(t){var n=e(this.href.replace(/.+#/,"#"));t.preventDefault();if(!n.length)return;n.is(":visible")?screenMeta.close(n,e(this)):screenMeta.open(n,e(this))},open:function(t,n){e(".screen-meta-toggle").not(n.parent()).css("visibility","hidden");t.parent().show();t.slideDown("fast",function(){t.focus();n.addClass("screen-meta-active").attr("aria-expanded",!0)});e(document).trigger("screen:options:open")},close:function(t,n){t.slideUp("fast",function(){n.removeClass("screen-meta-active").attr("aria-expanded",!1);e(".screen-meta-toggle").css("visibility","");t.parent().hide()});e(document).trigger("screen:options:close")}};e(".contextual-help-tabs").delegate("a","click",function(t){var n=e(this),r;t.preventDefault();if(n.is(".active a"))return!1;e(".contextual-help-tabs .active").removeClass("active");n.parent("li").addClass("active");r=e(n.attr("href"));e(".help-tab-content").not(r).removeClass("active").hide();r.addClass("active").show()});e(document).ready(function(){function H(e){var t,n,r,i,s,o,u,a=e.find(".wp-submenu");s=e.offset().top;o=y.scrollTop();u=s-o-30;t=s+a.height()+1;n=E.height();r=60+t-n;i=y.height()+o-50;i<t-r&&(r=t-i);r>u&&(r=u);r>1?a.css("margin-top","-"+r+"px"):a.css("margin-top","")}function B(e){var t=y.scrollTop(),n=!e||e.type!=="scroll";if(d||m||S.data("wp-responsive"))return;if(P.menu+P.adminbar<P.window||P.menu+P.adminbar+20>P.wpwrap){F();return}D=!0;if(P.menu+P.adminbar>P.window){if(t<0){if(!O){O=!0;M=!1;w.css({position:"fixed",top:"",bottom:""})}return}if(t+P.window>g.height()-1){if(!M){M=!0;O=!1;w.css({position:"fixed",top:"",bottom:0})}return}if(t>A){if(O){O=!1;_=w.offset().top-P.adminbar-(t-A);_+P.menu+P.adminbar<t+P.window&&(_=t+P.window-P.menu-P.adminbar);w.css({position:"absolute",top:_,bottom:""})}else if(!M&&w.offset().top+P.menu<t+P.window){M=!0;w.css({position:"fixed",top:"",bottom:0})}}else if(t<A){if(M){M=!1;_=w.offset().top-P.adminbar+(A-t);_+P.menu>t+P.window&&(_=t);w.css({position:"absolute",top:_,bottom:""})}else if(!O&&w.offset().top>=t+P.adminbar){O=!0;w.css({position:"fixed",top:"",bottom:""})}}else if(n){O=M=!1;_=t+P.window-P.menu-P.adminbar-1;_>0?w.css({position:"absolute",top:_,bottom:""}):F()}}A=t}function j(){P={window:y.height(),wpwrap:E.height(),adminbar:L.height(),menu:w.height()}}function F(){if(d||!D)return;O=M=D=!1;w.css({position:"",top:"",bottom:""})}function I(){j();if(S.data("wp-responsive")){b.removeClass("sticky-menu");F()}else if(P.menu+P.adminbar>P.window){B();b.removeClass("sticky-menu")}else{b.addClass("sticky-menu");F()}}var n,r,i,s,o,u,a,f,l,c=!1,h=e("input.current-page"),p=h.val(),d=/iPhone|iPad|iPod/.test(navigator.userAgent),v=navigator.userAgent.indexOf("Android")!==-1,m=e(document.documentElement).hasClass("ie8"),g=e(document),y=e(t),b=e(document.body),w=e("#adminmenuwrap"),E=e("#wpwrap"),S=e("#adminmenu"),x=e("#wp-responsive-overlay"),T=e("#wp-toolbar"),N=T.find('a[aria-haspopup="true"]'),C=e(".meta-box-sortables"),k=!1,L=e("#wpadminbar"),A=0,O=!1,M=!1,_=0,D=!1,P={window:y.height(),wpwrap:E.height(),adminbar:L.height(),menu:w.height()};S.on("click.wp-submenu-head",".wp-submenu-head",function(t){e(t.target).parent().siblings("a").get(0).click()});e("#collapse-menu").on("click.collapse-menu",function(){var n=e(document.body),r,i;e("#adminmenu div.wp-submenu").css("margin-top","");t.innerWidth?r=Math.max(t.innerWidth,document.documentElement.clientWidth):r=961;if(r&&r<960)if(n.hasClass("auto-fold")){n.removeClass("auto-fold").removeClass("folded");setUserSetting("unfold",1);setUserSetting("mfold","o");i="open"}else{n.addClass("auto-fold");setUserSetting("unfold",0);i="folded"}else if(n.hasClass("folded")){n.removeClass("folded");setUserSetting("mfold","o");i="open"}else{n.addClass("folded");setUserSetting("mfold","f");i="folded"}e(document).trigger("wp-collapse-menu",{state:i})});if("ontouchstart"in t||/IEMobile\/[1-9]/.test(navigator.userAgent)){u=d?"touchstart":"click";e(document.body).on(u+".wp-mobile-hover",function(t){if(S.data("wp-responsive"))return;e(t.target).closest("#adminmenu").length||S.find("li.opensub").removeClass("opensub")});S.find("a.wp-has-submenu").on(u+".wp-mobile-hover",function(t){var n=e(this).parent();if(S.data("wp-responsive"))return;if(!n.hasClass("opensub")&&(!n.hasClass("wp-menu-open")||n.width()<40)){t.preventDefault();H(n);S.find("li.opensub").removeClass("opensub");n.addClass("opensub")}})}if(!d&&!v){S.find("li.wp-has-submenu").hoverIntent({over:function(){var t=e(this),n=t.find(".wp-submenu"),r=parseInt(n.css("top"),10);if(isNaN(r)||r>-5)return;if(S.data("wp-responsive"))return;H(t);S.find("li.opensub").removeClass("opensub");t.addClass("opensub")},out:function(){if(S.data("wp-responsive"))return;e(this).removeClass("opensub").find(".wp-submenu").css("margin-top","")},timeout:200,sensitivity:7,interval:90});S.on("focus.adminmenu",".wp-submenu a",function(t){if(S.data("wp-responsive"))return;e(t.target).closest("li.menu-top").addClass("opensub")}).on("blur.adminmenu",".wp-submenu a",function(t){if(S.data("wp-responsive"))return;e(t.target).closest("li.menu-top").removeClass("opensub")}).find("li.wp-has-submenu.wp-not-current-submenu").on("focusin.adminmenu",function(){H(e(this))})}l=e("div.wrap h2:first");l.nextAll("div.updated, div.error, div.notice").addClass("below-h2");e("div.updated, div.error, div.notice").not(".below-h2, .inline").insertAfter(l);screenMeta.init();e("tbody").children().children(".check-column").find(":checkbox").click(function(t){if("undefined"==t.shiftKey)return!0;if(t.shiftKey){if(!c)return!0;n=e(c).closest("form").find(":checkbox");r=n.index(c);i=n.index(this);s=e(this).prop("checked");if(0<r&&0<i&&r!=i){o=i>r?n.slice(r,i):n.slice(i,r);o.prop("checked",function(){return e(this).closest("tr").is(":visible")?s:!1})}}c=this;var u=e(this).closest("tbody").find(":checkbox").filter(":visible").not(":checked");e(this).closest("table").children("thead, tfoot").find(":checkbox").prop("checked",function(){return 0===u.length});return!0});e("thead, tfoot").find(".check-column :checkbox").on("click.wp-toggle-checkboxes",function(t){var n=e(this),r=n.closest("table"),i=n.prop("checked"),s=t.shiftKey||n.data("wp-toggle");r.children("tbody").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return e(this).is(":hidden")?!1:s?!e(this).prop("checked"):i?!0:!1});r.children("thead,  tfoot").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return s?!1:i?!0:!1})});e("td.post-title, td.title, td.comment, .bookmarks td.column-name, td.blogname, td.username, .dashboard-comment-wrap").focusin(function(){clearTimeout(a);f=e(this).find(".row-actions");f.addClass("visible")}).focusout(function(){a=setTimeout(function(){f.removeClass("visible")},30)});e("#default-password-nag-no").click(function(){setUserSetting("default_password_nag","hide");e("div.default-password-nag").hide();return!1});e("#newcontent").bind("keydown.wpevent_InsertTab",function(t){var n=t.target,r,i,s,o,u;if(t.keyCode==27){e(n).data("tab-out",!0);return}if(t.keyCode!=9||t.ctrlKey||t.altKey||t.shiftKey)return;if(e(n).data("tab-out")){e(n).data("tab-out",!1);return}r=n.selectionStart;i=n.selectionEnd;s=n.value;try{this.lastKey=9}catch(a){}if(document.selection){n.focus();u=document.selection.createRange();u.text="	"}else if(r>=0){o=this.scrollTop;n.value=s.substring(0,r).concat("	",s.substring(i));n.selectionStart=n.selectionEnd=r+1;this.scrollTop=o}t.stopPropagation&&t.stopPropagation();t.preventDefault&&t.preventDefault()});e("#newcontent").bind("blur.wpevent_InsertTab",function(){this.lastKey&&9==this.lastKey&&this.focus()});h.length&&h.closest("form").submit(function(){e('select[name="action"]').val()==-1&&e('select[name="action2"]').val()==-1&&h.val()==p&&h.val("1")});e('.search-box input[type="search"], .search-box input[type="submit"]').mousedown(function(){e('select[name^="action"]').val("-1")});e("#contextual-help-link, #show-settings-link").on("focus.scroll-into-view",function(e){e.target.scrollIntoView&&e.target.scrollIntoView(!1)});(function(){function i(){t.prop("disabled",""===n.map(function(){return e(this).val()}).get().join(""))}var t,n,r=e("form.wp-upload-form");if(!r.length)return;t=r.find('input[type="submit"]');n=r.find('input[type="file"]');i();n.on("change",i)})();if(!d){y.on("scroll.pin-menu",B);g.on("tinymce-editor-init.pin-menu",function(e,t){t.on("wp-autoresize",j)})}t.wpResponsive={init:function(){var n=this;g.on("wp-responsive-activate.wp-responsive",function(){n.activate()}).on("wp-responsive-deactivate.wp-responsive",function(){n.deactivate()});e("#wp-admin-bar-menu-toggle a").attr("aria-expanded","false");e("#wp-admin-bar-menu-toggle").on("click.wp-responsive",function(t){t.preventDefault();E.toggleClass("wp-responsive-open");if(E.hasClass("wp-responsive-open")){e(this).find("a").attr("aria-expanded","true");e("#adminmenu a:first").focus()}else e(this).find("a").attr("aria-expanded","false")});S.on("click.wp-responsive","li.wp-has-submenu > a",function(t){if(!S.data("wp-responsive"))return;e(this).parent("li").toggleClass("selected");t.preventDefault()});n.trigger();g.on("wp-window-resized.wp-responsive",e.proxy(this.trigger,this));y.on("load.wp-responsive",function(){var e=navigator.userAgent.indexOf("AppleWebKit/")>-1?y.width():t.innerWidth;e<=782&&n.disableSortables()})},activate:function(){I();b.hasClass("auto-fold")||b.addClass("auto-fold");S.data("wp-responsive",1);this.disableSortables()},deactivate:function(){I();S.removeData("wp-responsive");this.enableSortables()},trigger:function(){var e;if(!t.innerWidth)return;e=Math.max(t.innerWidth,document.documentElement.clientWidth);if(e<=782){if(!k){g.trigger("wp-responsive-activate");k=!0}}else if(k){g.trigger("wp-responsive-deactivate");k=!1}e<=480?this.enableOverlay():this.disableOverlay()},enableOverlay:function(){x.length===0&&(x=e('<div id="wp-responsive-overlay"></div>').insertAfter("#wpcontent").hide().on("click.wp-responsive",function(){T.find(".menupop.hover").removeClass("hover");e(this).hide()}));N.on("click.wp-responsive",function(){x.show()})},disableOverlay:function(){N.off("click.wp-responsive");x.hide()},disableSortables:function(){if(C.length)try{C.sortable("disable")}catch(e){}},enableSortables:function(){if(C.length)try{C.sortable("enable")}catch(e){}}};t.wpResponsive.init();I();g.on("wp-window-resized.pin-menu postboxes-columnchange.pin-menu postbox-toggled.pin-menu wp-collapse-menu.pin-menu wp-scroll-start.pin-menu",I)});(function(){function r(){e(document).trigger("wp-window-resized")}function i(){t.clearTimeout(n);n=t.setTimeout(r,200)}var n;e(t).on("resize.wp-fire-once",i)})();(function(){if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){var e=document.createElement("style");e.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}"));document.getElementsByTagName("head")[0].appendChild(e)}})()})(jQuery,window);